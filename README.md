# Приложение для Благотворительного фонда поддержки котиков QRKot
### Описание
Фонд собирает пожертвования на различные целевые проекты для помощи котикам.\
Ключевые возможности сервиса:
* создание проектов
  
  В Фонде QRKot может быть открыто несколько целевых проектов. У каждого проекта есть название, описание и сумма, которую планируется собрать. После того, как нужная сумма собрана — проект закрывается.
Пожертвования в проекты поступают по принципу First In, First Out: все пожертвования идут в проект, открытый раньше других; когда этот проект набирает необходимую сумму и закрывается — пожертвования начинают поступать в следующий проект.
* создание пожертвований

  Каждый пользователь может сделать пожертвование и сопроводить его комментарием. Пожертвования не целевые: они вносятся в фонд, а не в конкретный проект. Каждое полученное пожертвование автоматически добавляется в первый открытый проект, который ещё не набрал нужную сумму. Если пожертвование больше нужной суммы или же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта. При создании нового проекта все неинвестированные пожертвования автоматически вкладываются в новый проект.

* регистрация пользователей
  
  Целевые проекты создаются администраторами сайта. 
Любой пользователь может видеть список всех проектов, включая требуемые и уже внесенные суммы. Это касается всех проектов — и открытых, и закрытых.
Зарегистрированные пользователи могут отправлять пожертвования и просматривать список своих пожертвований.

Cпецификацию проекта можно посмотреть в файле openapi.json.

Также появилась возможность формирования отчёта в гугл-таблице. В таблице выводятся закрытые проекты, отсортированные по скорости
сбора средств: от тех, что закрылись быстрее всего, до тех, что долго собирали нужную сумму.
Для того чтобы воспользоваться этой функцией, нужно создать .env-файл в
корневой директории проекта с учётными данными вашего сервисного
аккаунта гугл.
Таблица формирется при переходе на эндпоинт `http://127.0.0.1:8000/google`.


### Технологии
Python 3.10\
FastAPI 0.78.0\
Pydantic 1.9.1\
SQLAlchemy 1.4.36\
Alembic 1.12.0\
SQLite
### Запуск проекта
Клонировать репозиторий и перейти в него в командной строке:

```
git@github.com:serebrennikovalexander/QRkot_spreadsheets.git
```

```
cd QRkot_spreadsheets
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv venv
```

* Если у вас Linux/macOS

    ```
    source venv/bin/activate
    ```

* Если у вас Windows

    ```
    source venv/scripts/activate
    ```

Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```
Запустить проект:

```
uvicorn app.main:app --reload
```
Откройте страницу проекта `http://127.0.0.1:8000/docs`, именно здесь доступна документация Swagger.\
В проекте уже есть база данных fastapi.db с несколькими проектами и одним пожертвованием.\
В базе уже есть админ.\
Данные админа:
```
email: superuser@example.com
password: superuser
```

### Автор
Александр Серебренников
